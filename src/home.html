<!DOCTYPE html>
    <html>
        <head>
            <meta charset='utf-8'>
            <title>loadOn | Descubra o melhor</title>
            <link rel='stylesheet' type='text/css' media='screen' href='./styles/home.css'>
            <link href="https://fonts.googleapis.com/css?family=Fjalla+One&display=swap" rel="stylesheet">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        </head>

        <body>
            <header class="header-fixed">
                <div class="header-limiter">
                    <a href="#" id="titlesite"> loadOn... </a>
                    <nav>
                        <a href="#" class="selected">Home</a>
                        <i class="fa fa-search" color="green" style="color: #8699e4; font-weight: bold;"></i>
                    </nav>
                </div>
            </header>

            <script>

                $(document).ready(function(){

                    var showHeaderAt = 150;

                    var win = $(window),
                            body = $('body');


                    if(win.width() > 600){

                        win.on('scroll', function(e){

                            if(win.scrollTop() > showHeaderAt) {
                                body.addClass('fixed');
                            }
                            else {
                                body.removeClass('fixed');
                            }
                        });

                    }

                });

            </script>
            <script>
                $(document).ready(function() {
                    var key = 'AIzaSyCmXyHtGFRGTTMmI_a5aQrkmi5jEvFpBcI';
                    var playlistId = 'PLKSD8UK-Sfa_c56yJf7fk_3AaGnIcwT90';
                    var URL = 'https://www.googleapis.com/youtube/v3/playlistItems';

                    var options = {
                        part: 'snippet',
                        key: key,
                        maxResults: 20,
                        playlistId: playlistId
                    }

                    loadVids();

                    /*lê a API do youtube e retorna os vídeos*/
                    function loadVids() {
                        $.getJSON(URL, options, function(data) {
                            var id = data.items[0].snippet.resourceId.videoId;
                            mainVid(id);
                            resultsLoop(data);
                        })
                    }


                    function mainVid(id) {
                        $('#video').html(`
                            <iframe 
                            style="margin-left: 100px; border-radius: 20px; margin-top: 10px; box-shadow: 5px 5px 15px black" 
                            width="45%" 
                            height="340" 
                            src="https://www.youtube.com/embed/${id}?color=white" 
                            frameborder="0" allow="accelerometer; autoplay; 
                            encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen></iframe>
                        `)
                    }


                    function resultsLoop(data){
                        $.each(data.items, function(i, item) {

                            var thumb = item.snippet.thumbnails.medium.url;
                            var title = item.snippet.title;
                            var desc = item.snippet.description;
                            var vid = item.snippet.resourceId.videoId;

                            $('main').append(`
                                <article class="item" data-key="${vid}">
                                    <img class="thumb" src="${thumb}" alt=""/>
                                    <div class= "details">
                                        <h4>${title}</h4>
                                        <p>${desc}</p>
                                    </div>
                                </article>
                            `);
                        })
                    }

                    $('main').on('click', 'article', function() {
                        var id = $(this).attr('data-key');
                        mainVid(id);
                    });
                    

                });
            </script>
                <div id="video" style="flex-direction: column;">
                        <div style="display: flex; flex-direction: row;">
                            <span class="textRandom" style="margin-left: 100px; margin-top: 70px; font-size: 20px; ">Show Random Videos</span>
                        </div>
                </div>

                <main></main>
        </body>
    </html>